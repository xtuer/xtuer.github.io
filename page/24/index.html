<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>公孙二狗</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="大圣，此去欲何？踏南天，碎凌霄。若一去不回……？便一去不回！">
<meta property="og:type" content="website">
<meta property="og:title" content="公孙二狗">
<meta property="og:url" content="http://xtuer.github.io/page/24/index.html">
<meta property="og:site_name" content="公孙二狗">
<meta property="og:description" content="大圣，此去欲何？踏南天，碎凌霄。若一去不回……？便一去不回！">
<meta property="og:locale">
<meta property="article:author" content="公孙二狗">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="公孙二狗" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/dog.png">
  
  
<link rel="stylesheet" href="/css/style.css">


  <!-- <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
  <!-- <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script> -->
  <!-- <script src="//cdn.bootcss.com/require.js/2.3.6/require.min.js"></script> -->
  <link href="/css/fonts/font-awesome.min.css" rel="stylesheet">
  <script src="/js/jquery.min.js"></script>
  <script src="/js/require.min.js"></script>
  <script src="/js/main.js"></script>

  <!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> -->
  <!-- <script src="https://hm.baidu.com/hm.js?22778d8041aa1437b11529a3e87a0a12"></script> -->
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
    <div id="container">
        <div class="left-col">
            <div class="content-table">Content Table</div>
            <div class="overlay"></div>

<ul class="menu">
    <!-- <li class="item"><a href="javascript:void(0)" id="baidu-search-button">百度搜索</a></li> -->
    <!-- <li class="item"><a href="javascript:void(0)" id="google-search-button">谷歌搜索</a></li> -->
    <!-- <li class="item non-index-item"><a href="javascript:void(0)" id="show-toc-button">显示目录</a></li> -->
</ul>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="/img/dog.png" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/all/">公孙二狗</a></h1>
		</hgroup>
		<p style=" margin-bottom: 10px;margin-top: -5px;">
			<a style="color: gray;" target="_blank" rel="noopener" href="http://wpa.qq.com/msgrd?v=3&uin=26664141&site=qq&menu=yes">QQ: 26664141</a>
		</p>

		
		<p class="header-subtitle">大圣，此去欲何？踏南天，碎凌霄。若一去不回……？便一去不回！</p>
		
		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-ribbon" data-idx="1">
							<div class="ribbon"></div>
						</div>
						<div class="icon-wrap icon-house hide" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>

				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Tags</li>
						<li>Menu</li>
						
						<li>Links</li>
						
						
						<li>About</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				
				<section class="switch-part switch-part1">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Ajax/" style="font-size: 10.56px;">Ajax</a> <a href="/tags/Cas/" style="font-size: 12.22px;">Cas</a> <a href="/tags/DB/" style="font-size: 15px;">DB</a> <a href="/tags/FE/" style="font-size: 20px;">FE</a> <a href="/tags/Go/" style="font-size: 10px;">Go</a> <a href="/tags/Gradle/" style="font-size: 13.89px;">Gradle</a> <a href="/tags/Hexo/" style="font-size: 12.22px;">Hexo</a> <a href="/tags/Index/" style="font-size: 12.78px;">Index</a> <a href="/tags/Java/" style="font-size: 19.44px;">Java</a> <a href="/tags/Mac/" style="font-size: 16.67px;">Mac</a> <a href="/tags/Misc/" style="font-size: 17.22px;">Misc</a> <a href="/tags/PHP/" style="font-size: 11.11px;">PHP</a> <a href="/tags/Qt/" style="font-size: 18.33px;">Qt</a> <a href="/tags/QtBook/" style="font-size: 18.89px;">QtBook</a> <a href="/tags/Redis/" style="font-size: 11.11px;">Redis</a> <a href="/tags/SemanticUi/" style="font-size: 13.89px;">SemanticUi</a> <a href="/tags/Spring/" style="font-size: 11.67px;">Spring</a> <a href="/tags/SpringBoot/" style="font-size: 13.33px;">SpringBoot</a> <a href="/tags/SpringCore/" style="font-size: 15.56px;">SpringCore</a> <a href="/tags/SpringMVC/" style="font-size: 14.44px;">SpringMVC</a> <a href="/tags/SpringSecurity/" style="font-size: 15px;">SpringSecurity</a> <a href="/tags/SpringWeb/" style="font-size: 17.78px;">SpringWeb</a> <a href="/tags/Util/" style="font-size: 17.78px;">Util</a> <a href="/tags/Vue/" style="font-size: 16.11px;">Vue</a> <a href="/tags/zTree/" style="font-size: 11.67px;">zTree</a>
                    </div>
                    <script>

                    </script>
				</section>
				

				<section class="switch-part switch-part2">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>

				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://loadship.cn">小鱼人</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://qtnull.com/">千古</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">吞风吻雨葬落日未曾彷徨，欺山赶海践雪径也未绝望，拈花把酒偏折煞世人情狂，凭这两眼与百臂或千手不能防，天阔阔雪漫漫共谁同航，这沙滚滚水皱皱笑着浪荡，贪欢一晌偏教那女儿情长埋葬。</div>
				</section>
				
			</div>
		</div>
        <div class="links-area" style="margin-top: 10px;">
            <a href="/html/tools">收藏夹 |</a>
            <a href="/qtbook">Qt 杂谈 |</a>
            <a href="/html/vue-in-action">Vue 实践</a>
            <a href="/html/spring-boot">Spring Boot |</a>
            <a href="/spring-web-index">Java Web 开发</a>
        </div>
	</header>
</div>

<script>
    $(document).ready(function() {
        // Baidu 搜索
        // $('#baidu-search-button').click(function(event) {
        //     layer.prompt({title: false, formType: 0, closeBtn: 0, maxlength: 140}, function(text, index) {
        //         layer.close(index);
        //         window.open('https://www.baidu.com/s?wd=site:qtdebug.com+'+text);
        //     });
        // });
        //
        // // Google 搜索
        // $('#google-search-button').click(function(event) {
        //     layer.prompt({title: false, formType: 0, closeBtn: 0, maxlength: 140}, function(text, index) {
        //         layer.close(index);
        //         window.open('https://www.google.com/?#q=site:qtdebug.com+'+text);
        //     });
        // });
    });

    function resetTags() {
		var tags = $(".tagcloud a");
		tags.css({"font-size": "12px"});
		for(var i=0,len=tags.length; i<len; i++){
			var num = tags.eq(i).html().length % 5 +1;
			tags[i].className = "";
			tags.eq(i).addClass("color"+num);
		}
    }

    resetTags();
</script>

        </div>
        <div class="mid-col">
            <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img src="/img/dog.png" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
			</div>
			<hgroup>
			  <h1 class="header-author"></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>

            <div class="body-wrap">
  
    <!-- 生成目录 -->


<article id="post-spring-web-cors" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-web-cors/" class="article-date">
  	<!-- <time datetime="2017-03-31T11:29:42.000Z" itemprop="datePublished">2017-03-31</time> -->
    2017-03-31
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-web-cors/">Ajax 跨域访问</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <h2 id="什么情况下是跨域访问？"><a href="#什么情况下是跨域访问？" class="headerlink" title="什么情况下是跨域访问？"></a>什么情况下是跨域访问？</h2><p>URL: <code>prototype</code>://<code>hostname</code>:<code>port</code>/path，当 prototype，hostname(包括子域名)，port 中有任意一个和发起 request 的 URL 中对应部分不同时，就是跨域访问。例如从 <a target="_blank" rel="noopener" href="http://localhost/foo.html">http://localhost/foo.html</a> 中发起到 <a target="_blank" rel="noopener" href="http://127.0.0.1/bar.php">http://127.0.0.1/bar.php</a> 的 AJAX 请求就是跨域请求，这也是本地测试跨域请求的好办法。
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringWeb/" rel="tag">SpringWeb</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-web-cors/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-web-nginx" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-web-nginx/" class="article-date">
  	<!-- <time datetime="2017-03-31T11:18:23.000Z" itemprop="datePublished">2017-03-31</time> -->
    2017-03-31
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-web-nginx/">Nginx 负载均衡</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>通过简单的配置，Nginx 可以实现反向代理，负载均衡，动静分离，URL 重写等。</p>
<h2 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h2><ul>
<li>正向代理：客户使用代理访问多个外部 Web 服务器，就是翻墙</li>
<li>反向代理：多个客户使用它访问内部 Web 服务器
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringWeb/" rel="tag">SpringWeb</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-web-nginx/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-web-miscellaneous" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-web-miscellaneous/" class="article-date">
  	<!-- <time datetime="2017-03-31T11:12:57.000Z" itemprop="datePublished">2017-03-31</time> -->
    2017-03-31
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-web-miscellaneous/">Miscellaneous</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <h2 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="RequestMapping"></a>RequestMapping</h2><blockquote>
<p>Since introduction of <code>RequestMappingHandlerMapping</code> and <code>RequestMappingHandlerAdapter</code> in Spring 3.1 the distinction is even simpler: RequestMappingHandlerMapping finds the appropriate handler method for the given request. RequestMappingHandlerAdapter executes this method, providing it with all the arguments.</p>
</blockquote>
<h2 id="mvc-view-controller"><a href="#mvc-view-controller" class="headerlink" title="mvc:view-controller"></a>mvc:view-controller</h2><p>有很多静态页面，里没有动态的内容，如果写 Controller 去做映射的话又感觉很麻烦，都是体力活，没什么意思，这时可以用 <code>mvc:view-controller</code> 进行映射达到相同的效果而又不需要写 Controller。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- result.htm 是 View 的名字 --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/xtuer&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;result.htm&quot;</span>/&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>访问 <strong><a target="_blank" rel="noopener" href="http://localhost/xtuer">http://localhost/xtuer</a></strong>，则 View Resolver 访问的是 <strong>/WEB-INF/view/ftl/result.htm</strong>。
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringWeb/" rel="tag">SpringWeb</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-web-miscellaneous/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-web-form-resubmit" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-web-form-resubmit/" class="article-date">
  	<!-- <time datetime="2017-03-31T10:26:26.000Z" itemprop="datePublished">2017-03-31</time> -->
    2017-03-31
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-web-form-resubmit/">防止表单重复提交</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>开始介绍使用 redirect 技术防止表单提交，但是 redirect 解决不了后退到表单页面时重复提交表单，为了解决这个问题，加入了 token 的机制，而且同时能够防止 CRSF 攻击。</p>
<p>Token 的生成和校验也有不同的方式，如果每个 form 相关的处理方法中都写一遍 token 的生成和校验代码，在实际项目中是不太能接受的，文章的后面介绍了使用拦截器的方式生成和校验 token，这种方式在实际项目里才有意义。
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringWeb/" rel="tag">SpringWeb</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-web-form-resubmit/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-web-transaction" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-web-transaction/" class="article-date">
  	<!-- <time datetime="2017-03-31T09:46:48.000Z" itemprop="datePublished">2017-03-31</time> -->
    2017-03-31
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-web-transaction/">SpringMVC 事务</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <h2 id="事务具有以下四个基本特征"><a href="#事务具有以下四个基本特征" class="headerlink" title="事务具有以下四个基本特征"></a>事务具有以下四个基本特征</h2><table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>Atomic（原子性）</td>
<td>事务中包含的操作被看做一个逻辑单元，这个逻辑单元中的操作要么全部成功，要么全部失败。</td>
</tr>
<tr>
<td>Consistency（一致性）</td>
<td>只有合法的数据可以被写入数据库，否则事务应该将其回滚到最初状态。</td>
</tr>
<tr>
<td>Isolation（隔离性）</td>
<td>事务允许多个用户对同一个数据进行并发访问，而不破坏数据的正确性和完整性。<br>同时，并行事务的修改必须与其他并行事务的修改相互独立。</td>
</tr>
<tr>
<td>Durability（持久性）</td>
<td>事务结束后，事务处理的结果必须能够得到固化。数据库肯定是要被广大客户所共享访问的，<br>那么在数据库操作过程中很可能出现以下几种不确定情况。</td>
</tr>
</tbody></table>
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringWeb/" rel="tag">SpringWeb</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-web-transaction/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-web-interceptor" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-web-interceptor/" class="article-date">
  	<!-- <time datetime="2017-03-31T09:37:59.000Z" itemprop="datePublished">2017-03-31</time> -->
    2017-03-31
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-web-interceptor/">SpringMVC 拦截器</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <h2 id="1-实现拦截器类"><a href="#1-实现拦截器类" class="headerlink" title="1. 实现拦截器类"></a>1. 实现拦截器类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xtuer.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                             HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                             Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;my interceptor&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>; <span class="comment">// 返回 true 则继续处理</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                           HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                           Object handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                           ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String token = UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>).toUpperCase();</span><br><span class="line">        System.out.println(token);</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;token&quot;</span>, token);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                                HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                                Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringWeb/" rel="tag">SpringWeb</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-web-interceptor/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-web-springmvc-further" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-web-springmvc-further/" class="article-date">
  	<!-- <time datetime="2017-03-31T07:58:26.000Z" itemprop="datePublished">2017-03-31</time> -->
    2017-03-31
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-web-springmvc-further/">Spring MVC 进一步学习</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>本章主要介绍 Spring MVC 中一些常用的知识点，详细说明请参考官方帮助文档。</p>
<h2 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h2><ul>
<li><code>@GetMapping</code> 等价于 <code>@RequestMapping(method = RequestMethod.GET)</code></li>
<li><code>@PutMapping</code> 等价于 <code>@RequestMapping(method = RequestMethod.PUT)</code></li>
<li><code>@PostMapping</code> 等价于 <code>@RequestMapping(method = RequestMethod.POST)</code></li>
<li><code>@DeleteMapping</code> 等价于 <code>@RequestMapping(method = RequestMethod.DELETE)</code></li>
</ul>
<h2 id="PathVariable"><a href="#PathVariable" class="headerlink" title="@PathVariable"></a>@PathVariable</h2><p>取得 <code>URL</code> 路径中匹配的内容，适合 RESTful 的风格。</p>
<blockquote>
<p>A <code>@PathVariable</code> argument can be of any simple type such as int, long, Date, etc. Spring automatically converts to the appropriate type or throws a TypeMismatchException if it fails to do so. You can also register support for parsing additional data types.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xtuer.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParameterController</span> </span>&#123;</span><br><span class="line">    <span class="comment">// &#123;userId&#125; 是 placeholder，里面的内容可以用 @PathVariable 取到</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/users/&#123;userId&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">one</span><span class="params">(<span class="meta">@PathVariable</span> Integer userId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userId + <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果变量名和 &#123;&#125; 中的名字不一样，</span></span><br><span class="line">    <span class="comment">// 需要用 @PathVariable(&quot;nameInPath&quot;) 来指定变量要使用路径中的哪一个变量</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/categories/&#123;categoryName&#125;/products/&#123;productId&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">two</span><span class="params">(<span class="meta">@PathVariable</span> String categoryName,</span></span></span><br><span class="line"><span class="params"><span class="function">                      <span class="meta">@PathVariable(&quot;productId&quot;)</span> Integer pId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;categoryName: &quot;</span> + categoryName + <span class="string">&quot;, productId: &quot;</span> + pId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 还支持正则表达式的方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/regex/&#123;text:[a-z]+&#125;-&#123;number:\\d+&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">three</span><span class="params">(<span class="meta">@PathVariable</span> String text, <span class="meta">@PathVariable</span> Integer number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Text: &quot;</span> + text + <span class="string">&quot;, Number: &quot;</span> + number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 路径中有 . 时需要用正则，如 http://localhost:8080//question-img/GYYK034C/Aimage002.jpg</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/question-img/&#123;subjectCode&#125;/&#123;imageName:.+&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readQuestionImage</span><span class="params">(<span class="meta">@PathVariable</span> String subjectCode, <span class="meta">@PathVariable</span> String imageName)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试：</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="http://localhost:8080/users/1234">http://localhost:8080/users/1234</a></li>
<li><a target="_blank" rel="noopener" href="http://localhost:8080/categories/xbox/products/1234">http://localhost:8080/categories/xbox/products/1234</a></li>
<li><a target="_blank" rel="noopener" href="http://localhost:8080/regex/part-1234">http://localhost:8080/regex/part-1234</a>
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringWeb/" rel="tag">SpringWeb</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-web-springmvc-further/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-tomcat-lib" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/tomcat-lib/" class="article-date">
  	<!-- <time datetime="2017-03-30T05:51:38.000Z" itemprop="datePublished">2017-03-30</time> -->
    2017-03-30
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/tomcat-lib/">Tomcat 自定义 lib 目录</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>现在微服务挺流行的，以前的一个项目使用微服务后可能被拆开成了 5 个小项目，但是有的公司服务器不够，很可能把其中几个项目都安装在同一台机器上，甚至这些项目都使用同一个 Tomcat 来运行。</p>
<p>现在假设这些项目都使用 SpringMvc 来开发，以前一个项目的时候，项目的 lib 里放一份 SpringMvc 的 jar 包就可以了，现在因为分成了 5 个项目，则每个项目都在自己的 lib 里带上 SpringMvc 的 jar 包，结果就是比以前多了 4 分 SpringMvc 的 jar 包。</p>
<p><strong>能不能把一份 SpringMvc 的 jar 包放在一个共同的目录下，然后这些项目都共同使用呢？</strong>
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/tomcat-lib/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-tomcat-multiple-domains" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/tomcat-multiple-domains/" class="article-date">
  	<!-- <time datetime="2017-03-29T14:50:51.000Z" itemprop="datePublished">2017-03-29</time> -->
    2017-03-29
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/tomcat-multiple-domains/">Tomcat 多域名</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>一个 Tomcat 可以支持多个域名，需要在 server.xml 中为每一个域名配置一个 <strong>Host</strong>，参考默认的 localhost 的配置。</p>
<p>安装 Tomcat 后，在 <strong>conf/server.xml</strong> 中默认有一个 localhost 的 Host:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">&quot;localhost&quot;</span> <span class="attr">appBase</span>=<span class="string">&quot;webapps&quot;</span> <span class="attr">unpackWARs</span>=<span class="string">&quot;true&quot;</span> <span class="attr">autoDeploy</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.valves.AccessLogValve&quot;</span> <span class="attr">directory</span>=<span class="string">&quot;logs&quot;</span> <span class="attr">prefix</span>=<span class="string">&quot;localhost_access_log&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;.txt&quot;</span> <span class="attr">pattern</span>=<span class="string">&quot;%h %l %u %t <span class="symbol">&amp;quot;</span>%r<span class="symbol">&amp;quot;</span> %s %b&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>术语:</strong></p>
<ul>
<li>应用：一个域名对应一个 Web 应用</li>
<li>项目：一个域名下可以有多个项目，参考 Tomcat webapps 下的多个项目，例如 ROOT，manager，examples</li>
</ul>
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/tomcat-multiple-domains/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-fe-ckeditor" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/fe-ckeditor/" class="article-date">
  	<!-- <time datetime="2017-03-26T07:13:36.000Z" itemprop="datePublished">2017-03-26</time> -->
    2017-03-26
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/fe-ckeditor/">CKEditor 的使用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p><a target="_blank" rel="noopener" href="http://ckeditor.com/">CKEditor</a> 是一个非常优秀的 Web 服文本编辑器，提供了非常多的功能和丰富的文档</p>
<blockquote>
<p>Constantly leading innovation in the field of rich text editing. Take full control of your content creation process with such unique features as Paste from Word, Advanced Content Filter, widgets, custom HTML formatting and many more.</p>
</blockquote>
<p>CKEditor 还有一个很大的优势是它有一个非常强大的插件商店，里面基本都是免费的，推荐 3 个基础，但是很实用的插件：</p>
<ul>
<li><p>修改表格的大小 <strong>Table Resize</strong>: <a target="_blank" rel="noopener" href="http://ckeditor.com/addon/tableresize">http://ckeditor.com/addon/tableresize</a></p>
</li>
<li><p>预览编辑结果 <strong>Preview</strong>: <a target="_blank" rel="noopener" href="http://ckeditor.com/addon/preview">http://ckeditor.com/addon/preview</a></p>
</li>
<li><p>文本的颜色 <strong>Color Button</strong>: <a target="_blank" rel="noopener" href="http://ckeditor.com/addon/colorbutton">http://ckeditor.com/addon/colorbutton</a></p>
</li>
<li><p>公式编辑器: <a target="_blank" rel="noopener" href="http://ckeditor.com/addon/ckeditorwiris">http://ckeditor.com/addon/ckeditorwiris</a></p>
</li>
<li><p>很酷的皮肤 Moon Dark: <a target="_blank" rel="noopener" href="http://ckeditor.com/addon/moono-dark">http://ckeditor.com/addon/moono-dark</a></p>
<p><img src="http://s1.ckeditor.com/sites/default/files/styles/large/public/moono-dark/ckeditor-moono-dark.png?itok=Xbpl_YQj"></p>
</li>
</ul>
<p>修改配置 config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 使用上面的几个插件</span><br><span class="line">config.extraPlugins = &#x27;tableresize,preview,colorbutton&#x27;;</span><br><span class="line"></span><br><span class="line">// Simplify the dialog windows.</span><br><span class="line">config.removeDialogTabs = &#x27;image:advanced;image:Link;link:advanced;link:target&#x27;;</span><br><span class="line">config.removePlugins = &#x27;elementspath&#x27;;</span><br></pre></td></tr></table></figure>




<p>下面将介绍:</p>
<ul>
<li>集成 CKEditor</li>
<li>设置 CKEditor</li>
<li>对话框中使用 CKEditor</li>
<li>CKEditor 上传图片</li>
<li>CKEditor 上传文件
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/FE/" rel="tag">FE</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/fe-ckeditor/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/23/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="page-number" href="/page/23/">23</a><span class="page-number current">24</span><a class="page-number" href="/page/25/">25</a><a class="page-number" href="/page/26/">26</a><span class="space">&hellip;</span><a class="page-number" href="/page/48/">48</a><a class="extend next" rel="next" href="/page/25/">Next &amp;raquo;</a>
    </nav>
  
</div>
            <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <p>Hosted by <a target="_blank" rel="noopener" href="https://github.com">Github Pages</a></p>
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> Mod
            </div>
        </div>

        <!-- 卜算子 -->
        
    </div>
</footer>

        </div>
        

<script>
	var yiliaConfig = {
		fancybox: false,
		mathjax: false,
		animate: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<!-- 
<script src="/js/main.js"></script>
 -->

<!--



 -->

    </div>
</body>

</html>
