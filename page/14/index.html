<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>公孙二狗</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="大圣，此去欲何？踏南天，碎凌霄。若一去不回……？便一去不回！">
<meta property="og:type" content="website">
<meta property="og:title" content="公孙二狗">
<meta property="og:url" content="http://xtuer.github.io/page/14/index.html">
<meta property="og:site_name" content="公孙二狗">
<meta property="og:description" content="大圣，此去欲何？踏南天，碎凌霄。若一去不回……？便一去不回！">
<meta property="og:locale">
<meta property="article:author" content="公孙二狗">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="公孙二狗" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/dog.png">
  
  
<link rel="stylesheet" href="/css/style.css">


  <!-- <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
  <!-- <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script> -->
  <!-- <script src="//cdn.bootcss.com/require.js/2.3.6/require.min.js"></script> -->
  <link href="/css/fonts/font-awesome.min.css" rel="stylesheet">
  <script src="/js/jquery.min.js"></script>
  <script src="/js/require.min.js"></script>
  <script src="/js/main.js"></script>

  <!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> -->
  <!-- <script src="https://hm.baidu.com/hm.js?22778d8041aa1437b11529a3e87a0a12"></script> -->
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
    <div id="container">
        <div class="left-col">
            <div class="content-table">Content Table</div>
            <div class="overlay"></div>

<ul class="menu">
    <!-- <li class="item"><a href="javascript:void(0)" id="baidu-search-button">百度搜索</a></li> -->
    <!-- <li class="item"><a href="javascript:void(0)" id="google-search-button">谷歌搜索</a></li> -->
    <!-- <li class="item non-index-item"><a href="javascript:void(0)" id="show-toc-button">显示目录</a></li> -->
</ul>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="/img/dog.png" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/all/">公孙二狗</a></h1>
		</hgroup>
		<p style=" margin-bottom: 10px;margin-top: -5px;">
			<a style="color: gray;" target="_blank" rel="noopener" href="http://wpa.qq.com/msgrd?v=3&uin=26664141&site=qq&menu=yes">QQ: 26664141</a>
		</p>

		
		<p class="header-subtitle">大圣，此去欲何？踏南天，碎凌霄。若一去不回……？便一去不回！</p>
		
		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-ribbon" data-idx="1">
							<div class="ribbon"></div>
						</div>
						<div class="icon-wrap icon-house hide" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>

				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Tags</li>
						<li>Menu</li>
						
						<li>Links</li>
						
						
						<li>About</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				
				<section class="switch-part switch-part1">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Ajax/" style="font-size: 10.56px;">Ajax</a> <a href="/tags/Cas/" style="font-size: 12.22px;">Cas</a> <a href="/tags/DB/" style="font-size: 15px;">DB</a> <a href="/tags/FE/" style="font-size: 20px;">FE</a> <a href="/tags/Go/" style="font-size: 10px;">Go</a> <a href="/tags/Gradle/" style="font-size: 13.89px;">Gradle</a> <a href="/tags/Hexo/" style="font-size: 12.22px;">Hexo</a> <a href="/tags/Index/" style="font-size: 12.78px;">Index</a> <a href="/tags/Java/" style="font-size: 19.44px;">Java</a> <a href="/tags/Mac/" style="font-size: 16.67px;">Mac</a> <a href="/tags/Misc/" style="font-size: 17.22px;">Misc</a> <a href="/tags/PHP/" style="font-size: 11.11px;">PHP</a> <a href="/tags/Qt/" style="font-size: 18.33px;">Qt</a> <a href="/tags/QtBook/" style="font-size: 18.89px;">QtBook</a> <a href="/tags/Redis/" style="font-size: 11.11px;">Redis</a> <a href="/tags/SemanticUi/" style="font-size: 13.89px;">SemanticUi</a> <a href="/tags/Spring/" style="font-size: 11.67px;">Spring</a> <a href="/tags/SpringBoot/" style="font-size: 13.33px;">SpringBoot</a> <a href="/tags/SpringCore/" style="font-size: 15.56px;">SpringCore</a> <a href="/tags/SpringMVC/" style="font-size: 14.44px;">SpringMVC</a> <a href="/tags/SpringSecurity/" style="font-size: 15px;">SpringSecurity</a> <a href="/tags/SpringWeb/" style="font-size: 17.78px;">SpringWeb</a> <a href="/tags/Util/" style="font-size: 17.78px;">Util</a> <a href="/tags/Vue/" style="font-size: 16.11px;">Vue</a> <a href="/tags/zTree/" style="font-size: 11.67px;">zTree</a>
                    </div>
                    <script>

                    </script>
				</section>
				

				<section class="switch-part switch-part2">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>

				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://loadship.cn">小鱼人</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://qtnull.com/">千古</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">吞风吻雨葬落日未曾彷徨，欺山赶海践雪径也未绝望，拈花把酒偏折煞世人情狂，凭这两眼与百臂或千手不能防，天阔阔雪漫漫共谁同航，这沙滚滚水皱皱笑着浪荡，贪欢一晌偏教那女儿情长埋葬。</div>
				</section>
				
			</div>
		</div>
        <div class="links-area" style="margin-top: 10px;">
            <a href="/html/tools">收藏夹 |</a>
            <a href="/qtbook">Qt 杂谈 |</a>
            <a href="/html/vue-in-action">Vue 实践</a>
            <a href="/html/spring-boot">Spring Boot |</a>
            <a href="/spring-web-index">Java Web 开发</a>
        </div>
	</header>
</div>

<script>
    $(document).ready(function() {
        // Baidu 搜索
        // $('#baidu-search-button').click(function(event) {
        //     layer.prompt({title: false, formType: 0, closeBtn: 0, maxlength: 140}, function(text, index) {
        //         layer.close(index);
        //         window.open('https://www.baidu.com/s?wd=site:qtdebug.com+'+text);
        //     });
        // });
        //
        // // Google 搜索
        // $('#google-search-button').click(function(event) {
        //     layer.prompt({title: false, formType: 0, closeBtn: 0, maxlength: 140}, function(text, index) {
        //         layer.close(index);
        //         window.open('https://www.google.com/?#q=site:qtdebug.com+'+text);
        //     });
        // });
    });

    function resetTags() {
		var tags = $(".tagcloud a");
		tags.css({"font-size": "12px"});
		for(var i=0,len=tags.length; i<len; i++){
			var num = tags.eq(i).html().length % 5 +1;
			tags[i].className = "";
			tags.eq(i).addClass("color"+num);
		}
    }

    resetTags();
</script>

        </div>
        <div class="mid-col">
            <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img src="/img/dog.png" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
			</div>
			<hgroup>
			  <h1 class="header-author"></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>

            <div class="body-wrap">
  
    <!-- 生成目录 -->


<article id="post-spring-core-injection-enum" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-core-injection-enum/" class="article-date">
  	<!-- <time datetime="2017-09-22T03:49:31.000Z" itemprop="datePublished">2017-09-22</time> -->
    2017-09-22
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-core-injection-enum/">Enum 注入</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>注入 Enum 可以使用字符串直接注入，或者借助 org.springframework.beans.factory.config.FieldRetrievingFactoryBean，下面以注入 FastJson 的 SerializerFeature 和自定义 enum 为例. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.alibaba.fastjson.serializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">SerializerFeature</span> </span>&#123;</span><br><span class="line">    QuoteFieldNames,</span><br><span class="line">    UseSingleQuotes,</span><br><span class="line">    WriteMapNullValue,</span><br><span class="line">    WriteEnumUsingToString,</span><br><span class="line">    WriteEnumUsingName,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Color</span> </span>&#123;</span><br><span class="line">    RED, GREEN, BLUE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringCore/" rel="tag">SpringCore</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-core-injection-enum/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-boot-hot-swap" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-boot-hot-swap/" class="article-date">
  	<!-- <time datetime="2017-09-12T02:46:34.000Z" itemprop="datePublished">2017-09-12</time> -->
    2017-09-12
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-boot-hot-swap/">Spring Boot 热更新</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>尽快看到修改后的效果在开发中对于提高效率是非常重要的，一般有 2 种方式：</p>
<ul>
<li>热启动：自动重启整个项目，速度还是比较慢</li>
<li>热加载：只加载变化的内容，例如重新编译的 class，速度相对很快</li>
</ul>
<h2 id="热启动"><a href="#热启动" class="headerlink" title="热启动"></a>热启动</h2><p>Spring Boot 的 <code>org.springframework.boot:spring-boot-devtools</code> 可以用来实现热启动，在 build.gradle 中添加依赖 <code>implementation &#39;org.springframework.boot:spring-boot-devtools&#39;</code> 即可。</p>
<p>但是 Devtools 的热启动比较慢，例如数据库链接要重新建立。</p>
<h2 id="热加载"><a href="#热加载" class="headerlink" title="热加载"></a>热加载</h2><p>热加载的工具有：</p>
<ul>
<li>免费：Springloaded</li>
<li>收费：JRebel</li>
</ul>
<p>但是在 Spring Boot 2 中不能再使用 Springloaded 了，热加载方式只能用 JRebel 了，使用 JRebel 可以参考官方文档 <a target="_blank" rel="noopener" href="https://manuals.jrebel.com/jrebel/standalone/springboot.html">JRebel with Spring Boot</a>，下面是简要的步骤：</p>
<ul>
<li><p>在 ~/.gradle/gradle.properties 配置 JRebel 的路径：</p>
<ul>
<li>Win：<code>rebelAgent=-agentpath:C:/jrebel/lib/libjrebel64.dll</code></li>
<li>Mac：<code>rebelAgent=-agentpath:/usr/local/jrebel/lib/libjrebel64.dylib</code></li>
<li>Linux：<code>rebelAgent==-agentpath:/usr/local/jrebel/lib/libjrebel64.so</code></li>
</ul>
</li>
<li><p>在 build.gradle 中添加:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (project.hasProperty(&#x27;rebelAgent&#x27;)) &#123;</span><br><span class="line">    bootRun.jvmArgs += rebelAgent</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>执行 <code>gradle bootRun</code> 启动项目，看到 JRebel 输出的日志，说明 JRebel 生效了。</p>
<h2 id="编译修改的类"><a href="#编译修改的类" class="headerlink" title="编译修改的类"></a>编译修改的类</h2><p>不管是 DevTools 还是 JRebel，他们只是监听资源文件或者 class 的变化然后执行热启动或者热加载，并不负责编译被修改的类。当一个类变化后，可以使用以下几种方式进行编译：</p>
<ul>
<li>自动编译：终端进入项目目录，执行 <code>gradle -t classes</code> 启动一个监听任务，当发现项目中的 Java 类发生变化时进行自动编译，模版文件变化时自动复制到 build 对应的目录中</li>
<li>自动编译: 可以使用 IDEA 的自动编译功能: Compiler -&gt; Build project automatically</li>
<li>手动编译: 修改类后在 IDE 中点击菜单项或者按下快捷键进行编译</li>
</ul>
<blockquote>
<p>提示：控制台中看到 JRebel 生效了，但修改类后却没有看到效果，应该是还没有编译。</p>
</blockquote>
<p>更多相关信息请参考 Spring Boot 的文档 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-hot-swapping">Hot Swapping</a> 深入了解热更新。</p>

        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>
	</div>


      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-boot-thymeleaf" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-boot-thymeleaf/" class="article-date">
  	<!-- <time datetime="2017-09-11T14:35:42.000Z" itemprop="datePublished">2017-09-11</time> -->
    2017-09-11
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-boot-thymeleaf/">Spring Boot Thymeleaf</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>SpringBoot 2 默认使用 Thymeleaf 3，需要引入下面的依赖:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation(<span class="string">&#x27;org.springframework.boot:spring-boot-starter-thymeleaf&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在 application.properties 中配置 Thymeleaf:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.thymeleaf.mode</span>=HTML5</span><br><span class="line"><span class="attr">spring.thymeleaf.cache</span>=<span class="literal">false</span></span><br><span class="line"><span class="attr">spring.thymeleaf.suffix</span>=.html</span><br><span class="line"><span class="attr">spring.thymeleaf.encoding</span>=UTF-<span class="number">8</span></span><br><span class="line"><span class="attr">spring.thymeleaf.content-type</span>=text/html</span><br></pre></td></tr></table></figure>

<p>Controller:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xtuer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.ModelMap;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(ModelMap model)</span> </span>&#123;</span><br><span class="line">        model.put(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;Alice&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello.html&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 <code>resources/templates</code> 目录中创建文件 <code>hello.html</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>&gt;</span>Thymeleaf<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>访问 <a target="_blank" rel="noopener" href="http://localhost:8080/hello">http://localhost:8080/hello</a> 就可以看到页面了</p>

        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>
	</div>


      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-boot-redis" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-boot-redis/" class="article-date">
  	<!-- <time datetime="2017-09-11T07:59:14.000Z" itemprop="datePublished">2017-09-11</time> -->
    2017-09-11
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-boot-redis/">Spring Boot Redis</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>Spring Boot 中使用 Redis 非常简单:</p>
<ol>
<li><p>引入依赖</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile(<span class="string">&#x27;org.springframework.boot:spring-boot-starter-data-redis&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>在 application.properties 中配置 Redis</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.redis.host</span>=localhost</span><br><span class="line"><span class="attr">spring.redis.port</span>=<span class="number">6379</span></span><br><span class="line"><span class="attr">spring.redis.password</span>=</span><br><span class="line"><span class="attr">spring.redis.database</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">spring.redis.pool.max-active</span>=<span class="number">8</span></span><br><span class="line"><span class="attr">spring.redis.pool.max-wait</span>=-<span class="number">1</span></span><br><span class="line"><span class="attr">spring.redis.pool.max-idle</span>=<span class="number">8</span></span><br><span class="line"><span class="attr">spring.redis.pool.min-idle</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">spring.redis.timeout</span>=<span class="number">0</span>  </span><br></pre></td></tr></table></figure></li>
<li><p>使用 StringRedisTemplate 访问 Redis</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/redis&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">redis</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().get(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-boot-redis/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-boot-mybatis" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-boot-mybatis/" class="article-date">
  	<!-- <time datetime="2017-09-11T06:31:15.000Z" itemprop="datePublished">2017-09-11</time> -->
    2017-09-11
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-boot-mybatis/">Spring Boot MyBatis</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>Spring Boot 使用 MyBatis 主要为以下 4 步:</p>
<ol>
<li><p>引入依赖</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&#x27;org.mybatis.spring.boot:mybatis-spring-boot-starter:2.0.0&#x27;</span></span><br><span class="line">runtime(<span class="string">&#x27;mysql:mysql-connector-java:5.1.46&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>配置数据源: 配置 <strong>application.properties</strong></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.username</span>=root</span><br><span class="line"><span class="attr">spring.datasource.password</span>=root</span><br><span class="line"><span class="attr">spring.datasource.url</span>=jdbc:mysql://localhost:<span class="number">3306</span>/test</span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=com.mysql.jdbc.Driver</span><br></pre></td></tr></table></figure></li>
<li><p>编写 Mapper: 使用注解 <strong>@Mapper</strong> 自动生成 Mapper 对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xtuer.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Select(&quot;SELECT * FROM user WHERE username=#&#123;username&#125;&quot;)</span></span><br><span class="line">    <span class="function">Map <span class="title">findUserByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>使用 Mapper: 使用 <strong>@Autowired</strong> 装配 mapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xtuer.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xtuer.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map <span class="title">hello</span><span class="params">(<span class="meta">@RequestParam</span> String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.findUserByUsername(username);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-boot-mybatis/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-hexo-skip-render" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/hexo-skip-render/" class="article-date">
  	<!-- <time datetime="2017-09-06T23:12:30.000Z" itemprop="datePublished">2017-09-07</time> -->
    2017-09-07
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/hexo-skip-render/">Hexo 跳过指定文件的渲染</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>Hexo 博客中所见文章都是经由渲染的静态网页，而静态网页的样式都直接由 Hexo 的主题控制，所以 Hexo 博客大部分都呈现出一种高度的统一化与规范化。不过 Hexo 提供了跳过渲染功能，使得我们可以直接在博客中放入自定义网页: 在 <code>_config.yml</code> 配置中配置 <code>skip_render</code>:</p>
<p>如果要跳过 source 文件夹下的<code>test.html</code>，可以这样配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">skip_render: test.html</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意，千万不要加上个<code>/</code>写成<code>/test.html</code>，这里只能填相对于 source 文件夹的<strong>相对路径</strong>。</p>
</blockquote>
<p>如果要忽略 source 下的 test 文件夹下所有文件，可以这样配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">skip_render: test/*</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果要忽略 source 下的 test 文件夹下<code>.html</code>文件，可以这样配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">skip_render: test/*.html</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果要忽略 source 下的 test 文件夹内所有文件包括子文件夹以及子文件夹内的文件，可以这样配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">skip_render: test/**</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果要忽略多个路径的文件或目录，可以这样配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">skip_render:</span><br><span class="line">    - test.html</span><br><span class="line">    - test/*</span><br></pre></td></tr></table></figure>

<p>参考:</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/f89428fce8d5">Hexo 博客中跳过渲染，创建自定义网页</a></li>
<li><a target="_blank" rel="noopener" href="http://e12e.com/2016/06/05/hexo%E8%B7%B3%E8%BF%87%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E7%9A%84%E6%B8%B2%E6%9F%93/">Hexo 跳过指定文件的渲染</a></li>
</ul>

        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li></ul>
	</div>


      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-qtbook-paint-nine-patch-painter" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/qtbook-paint-nine-patch-painter/" class="article-date">
  	<!-- <time datetime="2017-09-06T07:36:38.000Z" itemprop="datePublished">2017-09-06</time> -->
    2017-09-06
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/qtbook-paint-nine-patch-painter/">九宫格绘图</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>很多时候都会使用图片作为 widget 的背景，如果图片和 widget 一样大的话那就没什么好说的，背景效果和图片的效果看上去一样，可更多的时候我们会面临图片和 widget 不一样大，如果把图片简单的缩放到和 widget 一样大作为背景的话，背景常常会变形、有锯齿等，如下面的背景图大小为 128 x 108，要作为 300 x 200 大小的背景，直接缩放绘制的效果很不好，如若使用接下来将要介绍的九宫格绘图技术来绘制背景的话，效果正是我们期望的:</p>
<ul>
<li>左边是直接缩放绘制的效果，背景发虚，有锯齿，圆角被放大</li>
<li>右边是九宫格技术绘制的效果，圆角和背景的圆角一样</li>
</ul>
<p><img src="../img/qtbook/paint/Paint-Nine-Patch-Painter-bkg.png"></p>
<p><img src="../img/qtbook/paint/Paint-Nine-Patch-Painter-1.png">
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QtBook/" rel="tag">QtBook</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/qtbook-paint-nine-patch-painter/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-security-11-qq-login" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-security-11-qq-login/" class="article-date">
  	<!-- <time datetime="2017-09-05T11:23:37.000Z" itemprop="datePublished">2017-09-05</time> -->
    2017-09-05
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-security-11-qq-login/">Spring Security QQ 登陆</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>Spring Security 中实现 QQ 登陆，可以在 FORM_LOGIN_FILTER 前插入一个 filter 用于拦截 QQ 登陆成功后的回调，进行身份认证。</p>
<p>开发前需要准备一个 QQ 互联账号和修改 hosts，按照下面的说明操作即可。</p>
<blockquote>
<p>要点: Spring Security 中身份认证成功的标志很简单，只要用用户信息创建一个 Authentication 对象，保存到 SecurityContextHolder 就可以了。</p>
<p>Spring Security 发现 SecurityContextHolder 中有 Authentication 后，就认为用户已经通过了身份认证，对访问的资源进行权限验证时调用 Authentication.getAuthorities() 获取用户的权限进行验证。</p>
</blockquote>
<h2 id="注册-QQ-互联账号"><a href="#注册-QQ-互联账号" class="headerlink" title="注册 QQ 互联账号"></a>注册 QQ 互联账号</h2><ol>
<li>在开发前，需要在 <code>QQ 互联</code> 注册一个开发者账号: <a target="_blank" rel="noopener" href="https://connect.qq.com/">https://connect.qq.com</a></li>
<li>然后点击 <code>应用管理</code>: <a target="_blank" rel="noopener" href="https://connect.qq.com/manage.html">https://connect.qq.com/manage.html</a></li>
<li>创建 <code>网站应用</code>，里面有开发需要的 <code>APP ID</code> 和 <code>APP Key</code></li>
</ol>
<h2 id="修改-hosts"><a href="#修改-hosts" class="headerlink" title="修改 hosts"></a>修改 hosts</h2><p>例如我们在 QQ 互联中填写的回调 URL 为 <a target="_blank" rel="noopener" href="http://open.qtdebug.com:8080/oauth/qq/callback">http://open.qtdebug.com:8080/oauth/qq/callback</a>，很显然 QQ 服务器是不能访问这个地址的，因为这个地址不存在，为了在 QQ 登陆成功后 QQ 服务器能访问这个地址，需要在系统的 <code>hosts</code> 文件里添加 <code>127.0.0.1 open.qtdebug.com</code>。</p>
<p>还有另一种方式是使用如 <code>Ngrok</code> 把本地映射为外网可访问。
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringSecurity/" rel="tag">SpringSecurity</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-security-11-qq-login/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-boot-start" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-boot-start/" class="article-date">
  	<!-- <time datetime="2017-09-05T05:51:36.000Z" itemprop="datePublished">2017-09-05</time> -->
    2017-09-05
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-boot-start/">Spring Boot Start</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>Spring Boot 创建入门级 RESTful Web 项目简单到令人发指，下面就来看看怎么用吧(如果想知道 Spring Boot 是啥，搜索即可):</p>
<ol>
<li>创建项目的骨架</li>
<li>添加 RestController</li>
<li>启动项目: gradle bootRun </li>
<li>打包项目: gradle build </li>
</ol>
<h2 id="创建项目的骨架"><a href="#创建项目的骨架" class="headerlink" title="创建项目的骨架"></a>创建项目的骨架</h2><ol>
<li>访问 <a target="_blank" rel="noopener" href="http://start.spring.io/">http://start.spring.io</a></li>
<li>选择 Gradle 项目，Spring Boot 2.x</li>
<li>填写 Group (项目的包名，例如 com.xtuer) 和 Artifact (可不填)</li>
<li>Search for dependencies 输入 <strong>web</strong></li>
<li>点击 Generate Project，会自动下载项目骨架 demo.zip</li>
<li>解压，如果不需要里面的 gradlew，删除即可
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-boot-start/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
    <!-- 生成目录 -->


<article id="post-spring-security-10-jwt" class="article article-type-post" itemscope itemprop="blogPost">
    <!--  -->

    
        <div class="article-meta">
            <a href="/spring-security-10-jwt/" class="article-date">
  	<!-- <time datetime="2017-09-03T00:08:21.000Z" itemprop="datePublished">2017-09-03</time> -->
    2017-09-03
</a>

        </div>
    

    
        <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/spring-security-10-jwt/">Spring Security JWT + Token 认证</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
        
            <p>在 <a target="_blank" rel="noopener" href="http://qtdebug.com/spring-security-8-token/">Spring Security Session + Token 认证</a> 中介绍了 Token 相关的身份验证，但是怎么验证 token 和使用 token 获取用户信息没有进行介绍，可以把 token 存储到 Redis、数据库等，下面介绍另一种 token 实现方法 JWT(Json Web Token)，这种 token 不需要存储到服务器，自身就能进行验证。</p>
<p>JWT 中存储了 token 的签名，用户信息，还可以存储 token 的签发时间用于服务器验证 token 的有效期，并且这些信息如果被篡改了的话就会导致 token 失效，JWT 的理论请参考 <a target="_blank" rel="noopener" href="http://www.jianshu.com/p/576dbf44b2ae">http://www.jianshu.com/p/576dbf44b2ae</a>。</p>
<p>为了在 Spring Security 中使用 JWT，需要修改下面 3 个类:</p>
<ul>
<li>TokenAuthenticationFilter</li>
<li>TokenService</li>
<li>JwtUtils
        
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringSecurity/" rel="tag">SpringSecurity</a></li></ul>
	</div>


      

      
        <p class="article-more-link">
          <a  href="/spring-security-10-jwt/#more">阅读全文</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  

</article>





  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/13/">⇠ Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/48/">48</a><a class="extend next" rel="next" href="/page/15/">Next ⇢</a>
    </nav>
  

</div>
            <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <p>Hosted by <a target="_blank" rel="noopener" href="https://github.com">Github Pages</a></p>
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> Mod
            </div>
        </div>

        <!-- 卜算子 -->
        
    </div>
</footer>

        </div>
        

<script>
	var yiliaConfig = {
		fancybox: false,
		mathjax: false,
		animate: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<!-- 
<script src="/js/main.js"></script>
 -->

<!--



 -->

    </div>
</body>

</html>
